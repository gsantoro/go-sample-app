# https://taskfile.dev

version: '3'

includes:
  github: ./lib/gh.taskfile.yml
  env: ./lib/env.taskfile.yml

tasks:
  default:
    cmds:
      - task: download_from_github
        vars:
          TASK_NAME: gh

      - task: download_from_github
        vars:
          TASK_NAME: env

      - task: download_from_github
        vars:
          TASK_NAME: go

      - task: download_from_github
        vars:
          TASK_NAME: docker

      - task: download_from_github
        vars:
          TASK_NAME: devenv

      - task: download_from_github
        vars:
          TASK_NAME: releaser

      - task: download_from_github
        vars:
          TASK_NAME: changie

      - task: download_from_github
        vars:
          TASK_NAME: swagger

      - task: download_from_github
        vars:
          TASK_NAME: chainguard

      - task: download_from_github
        vars:
          TASK_NAME: wolfi

  download_from_github:
    internal: true
    cmds:
      - task: github:download
        vars: 
          GITHUB_REPO: automation
          GITHUB_PATH: tools/taskfiles/lib/{{.TASK_NAME}}.taskfile.yml
          LOCAL_PATH: tools/taskfiles/lib/{{.TASK_NAME}}.taskfile.yml
