version: '3'

# gvm
# ----------------------------------------------------------------
#
# note: run from ../Taskfile.yaml

tasks:  
  deps:
    cmds:
      - bash < <(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)
      
  install:
    cmds: 
      - gvm install {{.CMD_GOVERSION}}
    vars:
      VERSION:
        sh: echo $CMD_GOVERSION
  
  # note: NOT WORKING
  switch:
    cmds:
      - gvm use {{.CMD_GOVERSION}}
    vars:
      VERSION:
        sh: echo $CMD_GOVERSION

  current:
    cmds:
      - gvm version